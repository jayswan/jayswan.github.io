---
layout: post
title: in-line editing of Cisco ACLs
date: '2008-11-13T11:05:00.000-07:00'
author: Jay Swan
tags: 
modified_time: '2008-11-13T11:16:19.350-07:00'
blogger_id: tag:blogger.com,1999:blog-5029689981158113588.post-5649208406958472705
blogger_orig_url: http://unroutable.blogspot.com/2008/11/in-line-editing-of-cisco-acls.html
---

Many people don't realize that reasonably recent versions of IOS have in-line ACL editing.<br /><br />The way this works is that ACLs have invisible line numbers that only show up when using a show access-list command, not when doing "show run":<br /><br /><span style="font-family:courier new;">R1#sh access-list TEST</span><br /><span style="font-family:courier new;">Extended IP access list TEST</span><br /><span style="font-family:courier new;">    10 permit tcp host 1.1.1.1 host 2.2.2.2</span><br /><span style="font-family:courier new;">    20 permit gre host 3.3.3.3 host 4.4.4.4</span><br /><br />In the example above, the line numbers are shown. If we just look at the config, they're not:<br /><br /><span style="font-family:courier new;">R1#sh run | s access-list</span><br /><span style="font-family:courier new;">ip access-list extended TEST</span><br /><span style="font-family:courier new;"> permit tcp host 1.1.1.1 host 2.2.2.2</span><br /><span style="font-family:courier new;"> permit gre host 3.3.3.3 host 4.4.4.4</span><br /><br /><br />Now, let's say I want to make line number 10 more restrictive:<br /><br /><br /><span style="font-family:courier new;">R1#conf t</span><br /><span style="font-family:courier new;">Enter configuration commands, one per line.  End with CNTL/Z.</span><br /><span style="font-family:courier new;">R1(config)#ip access-list ext TEST</span><br /><span style="font-family:courier new;">R1(config-ext-nacl)#15 permit tcp host 1.1.1.1 host 2.2.2.2 eq www</span><br /><span style="font-family:courier new;">R1(config-ext-nacl)#do sh access-list TEST</span><br /><span style="font-family:courier new;">Extended IP access list TEST</span><br /><span style="font-family:courier new;">    10 permit tcp host 1.1.1.1 host 2.2.2.2</span><br /><span style="font-family:courier new;">    15 permit tcp host 1.1.1.1 host 2.2.2.2 eq www</span><br /><span style="font-family:courier new;">    20 permit gre host 3.3.3.3 host 4.4.4.4</span><br /><span style="font-family:courier new;">R1(config-ext-nacl)#no 10</span><br /><span style="font-family:courier new;">R1(config-ext-nacl)#do sh access-list TEST</span><br /><span style="font-family:courier new;">Extended IP access list TEST</span><br /><span style="font-family:courier new;">    15 permit tcp host 1.1.1.1 host 2.2.2.2 eq www</span><br /><span style="font-family:courier new;">    20 permit gre host 3.3.3.3 host 4.4.4.4</span><br /><br /><br />If the odd sequence numbers really bother you, you can fix them:<br /><br /><span style="font-family:courier new;">R1(config)#ip access-list resequence TEST ?</span><br /><span style="font-family:courier new;">  <1-2147483647>  Starting Sequence Number</span><br /><br /><span style="font-family:courier new;">R1(config)#ip access-list resequence TEST 10 ?</span><br /><span style="font-family:courier new;">  <1-2147483647>  Step to increment the sequence number</span><br /><br /><span style="font-family:courier new;">R1(config)#ip access-list resequence TEST 10 10 ?</span><br /><span style="font-family:courier new;">  <cr></cr></span><br /><br /><span style="font-family:courier new;">R1(config)#ip access-list resequence TEST 10 10</span><br /><span style="font-family:courier new;">R1(config)#do sh access-list TEST</span><br /><span style="font-family:courier new;">Extended IP access list TEST</span><br /><span style="font-family:courier new;">    10 permit tcp host 1.1.1.1 host 2.2.2.2 eq www</span><br /><span style="font-family:courier new;">    20 permit gre host 3.3.3.3 host 4.4.4.4<br /><br />I'm not sure what IOS version this appeared in, but it's been around since at least the early 12.3T images.<br /></span>