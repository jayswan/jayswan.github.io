---
layout: post
title: Find Active Hostnames Per Network
date: '2011-01-12T08:10:00.002-07:00'
author: Jay Swan
tags: 
modified_time: '2011-01-12T08:11:23.556-07:00'
blogger_id: tag:blogger.com,1999:blog-5029689981158113588.post-5230870685050953597
blogger_orig_url: http://unroutable.blogspot.com/2011/01/find-active-hostnames-per-network.html
---

Here's a quick trick I use to find the hostnames of all active IPv4 devices in a subnet:<br /><br /><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: small;">$ <b>ssh routerIP.test.local 'sh arp | i Vlan70' | awk '{print $2}' | xargs -i dig -x {} +short</b></span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: small;">Password:</span></div><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: small;">foo-tstsrv-01.test.local.<br />foo-gissrv-01.test.local.<br />foo-appsrv-01.test.local.<br />foo-filsrv-03.test.local.<br />foo-filsrv-02.test.local.</span></div><br />Translated into English:<br /><ol><li><span style="font-size: small;"><b style="font-family: &quot;Courier New&quot;,Courier,monospace;">ssh routerIP.test.local 'sh arp | i Vlan70'</b></span> displays the ARP table for Vlan 70 on the router acting as the default gateway for that VLAN.</li><li><span style="font-size: small;"><b><span style="font-family: &quot;Courier New&quot;,Courier,monospace;">awk '{print $2}'</span></b></span> extracts the second field from the output, which is the IPv4 address for the ARP entry.</li><li><span style="font-size: x-small;"><b style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: small;">xargs -i dig -x {} +short</span> </b><span style="font-size: small;"><span style="font-family: inherit;">takes each one of those IPv4 addresses and queries DNS for the hostname associated with the IP address (that is, the PTR record), using the "dig -x" command, with the +short parameter to display only the hostname. The {} syntax is a part of the xargs command which causes the output from the previous command (that is, the awk command output which produces just an IPv4 address) to be inserted in the place of the {} characters.</span></span></span></li></ol><span style="font-size: x-small;"><span style="font-size: small;"><span style="font-family: inherit;">To run this on Windows, you need to have both <a href="http://www.cygwin.com/">Cygwin </a>and the <a href="http://unroutable.blogspot.com/2009/02/how-to-install-dig-for-windows.html">dig command</a> installed.</span></span></span>